<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrialSync - Clinical Trial Recruitment</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Crimson+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0e17;
            --bg-secondary: #141822;
            --bg-tertiary: #1a1f2e;
            --accent-primary: #00ff9f;
            --accent-secondary: #00d4ff;
            --text-primary: #e8edf4;
            --text-secondary: #8b95a8;
            --border-color: #2a3244;
            --warning: #ff6b00;
            --danger: #ff0055;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
        }

        .bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.03;
            z-index: 0;
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 2px, var(--accent-primary) 2px, var(--accent-primary) 4px),
                repeating-linear-gradient(90deg, transparent, transparent 2px, var(--accent-primary) 2px, var(--accent-primary) 4px);
            background-size: 40px 40px;
            pointer-events: none;
        }

        .content-wrapper {
            position: relative;
            z-index: 1;
        }

        h1, h2, h3 {
            font-family: 'Crimson Pro', serif;
            font-weight: 700;
        }

        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
            opacity: 0;
        }

        .slide-up {
            animation: slideUp 0.6s ease-out forwards;
            opacity: 0;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        @keyframes slideUp {
            from {
                transform: translateY(30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .delay-1 { animation-delay: 0.1s; }
        .delay-2 { animation-delay: 0.2s; }
        .delay-3 { animation-delay: 0.3s; }
        .delay-4 { animation-delay: 0.4s; }
        .delay-5 { animation-delay: 0.5s; }

        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .card:hover {
            border-color: var(--accent-primary);
            box-shadow: 0 0 20px rgba(0, 255, 159, 0.1);
        }

        .stat-card {
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, var(--accent-primary), var(--accent-secondary));
        }

        .tab-button {
            padding: 12px 24px;
            background: transparent;
            color: var(--text-secondary);
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .tab-button:hover {
            color: var(--text-primary);
        }

        .tab-button.active {
            color: var(--accent-primary);
            border-bottom-color: var(--accent-primary);
        }

        .table-wrapper {
            overflow-x: auto;
            background: var(--bg-tertiary);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: var(--bg-secondary);
        }

        th {
            padding: 16px;
            text-align: left;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-secondary);
            font-weight: 600;
            border-bottom: 1px solid var(--border-color);
        }

        td {
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
            font-size: 13px;
        }

        tbody tr {
            transition: background 0.2s ease;
        }

        tbody tr:hover {
            background: rgba(0, 255, 159, 0.02);
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: inline-block;
        }

        .status-active {
            background: rgba(0, 255, 159, 0.15);
            color: var(--accent-primary);
        }

        .status-recruiting {
            background: rgba(0, 212, 255, 0.15);
            color: var(--accent-secondary);
        }

        .status-pending {
            background: rgba(255, 107, 0, 0.15);
            color: var(--warning);
        }

        .status-completed {
            background: rgba(139, 149, 168, 0.15);
            color: var(--text-secondary);
        }

        .status-declined {
            background: rgba(255, 0, 85, 0.15);
            color: var(--danger);
        }

        .btn {
            padding: 8px 16px;
            border-radius: 6px;
            border: 1px solid var(--border-color);
            background: transparent;
            color: var(--text-primary);
            cursor: pointer;
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn:hover {
            background: var(--accent-primary);
            border-color: var(--accent-primary);
            color: var(--bg-primary);
        }

        .btn-primary {
            background: var(--accent-primary);
            border-color: var(--accent-primary);
            color: var(--bg-primary);
        }

        .btn-primary:hover {
            background: var(--accent-secondary);
            border-color: var(--accent-secondary);
        }

        .search-input {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px 16px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            width: 300px;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(0, 255, 159, 0.1);
        }

        .search-input::placeholder {
            color: var(--text-secondary);
        }

        .glow-text {
            text-shadow: 0 0 20px rgba(0, 255, 159, 0.3);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 14, 23, 0.9);
            backdrop-filter: blur(10px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease-out;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 32px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.4s ease-out;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-secondary);
        }

        .form-input, .form-select {
            width: 100%;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px 16px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(0, 255, 159, 0.1);
        }

        .progress-bar {
            height: 8px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .metric-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .metric-value {
            font-size: 32px;
            font-family: 'Crimson Pro', serif;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .metric-change {
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .metric-change.positive {
            color: var(--accent-primary);
        }

        .metric-change.negative {
            color: var(--danger);
        }

        .scrollbar-custom::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        .scrollbar-custom::-webkit-scrollbar-track {
            background: var(--bg-tertiary);
        }

        .scrollbar-custom::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        .scrollbar-custom::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }
    </style>
</head>
<body>
    <div class="bg-pattern"></div>
    
    <div class="content-wrapper">
        <!-- Header -->
        <header class="border-b border-[--border-color] bg-[--bg-secondary] sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-8 py-6 flex items-center justify-between">
                <div class="fade-in">
                    <h1 class="text-3xl glow-text">TrialSync</h1>
                    <p class="text-[--text-secondary] text-xs mt-1 uppercase tracking-wider">Clinical Recruitment Platform</p>
                </div>
                <div class="flex items-center gap-4 fade-in delay-1">
                    <button class="btn btn-primary" onclick="openModal('patient')">+ Add Patient</button>
                    <button class="btn btn-primary" onclick="openModal('trial')">+ Add Trial</button>
                </div>
            </div>
        </header>

        <!-- Stats Overview -->
        <section class="max-w-7xl mx-auto px-8 py-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <div class="card stat-card p-6 slide-up delay-2">
                    <div class="metric-label">Total Patients</div>
                    <div class="metric-value">1,247</div>
                    <div class="metric-change positive">
                        <span>↑</span>
                        <span>+12.5% this month</span>
                    </div>
                </div>
                <div class="card stat-card p-6 slide-up delay-3">
                    <div class="metric-label">Active Trials</div>
                    <div class="metric-value">34</div>
                    <div class="metric-change positive">
                        <span>↑</span>
                        <span>+3 new trials</span>
                    </div>
                </div>
                <div class="card stat-card p-6 slide-up delay-4">
                    <div class="metric-label">Matches Made</div>
                    <div class="metric-value">892</div>
                    <div class="metric-change positive">
                        <span>↑</span>
                        <span>+8.3% this week</span>
                    </div>
                </div>
                <div class="card stat-card p-6 slide-up delay-5">
                    <div class="metric-label">Success Rate</div>
                    <div class="metric-value">73%</div>
                    <div class="metric-change negative">
                        <span>↓</span>
                        <span>-2.1% vs last month</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Main Content -->
        <section class="max-w-7xl mx-auto px-8 pb-16">
            <!-- Tabs -->
            <div class="flex border-b border-[--border-color] mb-8 slide-up delay-3">
                <button class="tab-button active" onclick="switchTab('patients')">Patients</button>
                <button class="tab-button" onclick="switchTab('trials')">Clinical Trials</button>
                <button class="tab-button" onclick="switchTab('matching')">Matching Engine</button>
            </div>

            <!-- Patients Tab -->
            <div id="patients-tab" class="tab-content">
                <div class="flex justify-between items-center mb-6">
                    <input type="text" class="search-input" placeholder="Search patients by name, ID, condition..." id="patient-search">
                    <div class="flex gap-2">
                        <button class="btn">Export CSV</button>
                        <button class="btn">Filter</button>
                    </div>
                </div>

                <div class="table-wrapper scrollbar-custom">
                    <table id="patients-table">
                        <thead>
                            <tr>
                                <th>Patient ID</th>
                                <th>Name</th>
                                <th>Age</th>
                                <th>Gender</th>
                                <th>Condition</th>
                                <th>Status</th>
                                <th>Enrolled Date</th>
                                <th>Matched Trials</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="patients-tbody">
                            <!-- Data populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Trials Tab -->
            <div id="trials-tab" class="tab-content" style="display: none;">
                <div class="flex justify-between items-center mb-6">
                    <input type="text" class="search-input" placeholder="Search trials by name, phase, sponsor..." id="trial-search">
                    <div class="flex gap-2">
                        <button class="btn">Export CSV</button>
                        <button class="btn">Filter</button>
                    </div>
                </div>

                <div class="table-wrapper scrollbar-custom">
                    <table id="trials-table">
                        <thead>
                            <tr>
                                <th>Trial ID</th>
                                <th>Study Name</th>
                                <th>Phase</th>
                                <th>Sponsor</th>
                                <th>Condition</th>
                                <th>Status</th>
                                <th>Enrollment</th>
                                <th>Start Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="trials-tbody">
                            <!-- Data populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Matching Tab -->
            <div id="matching-tab" class="tab-content" style="display: none;">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div class="card p-6">
                        <h3 class="text-xl mb-4">Matching Algorithm</h3>
                        <p class="text-[--text-secondary] text-sm mb-4">Our AI-powered matching system analyzes patient profiles against trial criteria to identify optimal matches.</p>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between text-xs mb-2">
                                    <span>Demographics Match</span>
                                    <span>92%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 92%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-xs mb-2">
                                    <span>Medical History</span>
                                    <span>87%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 87%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-xs mb-2">
                                    <span>Geographic Proximity</span>
                                    <span>78%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 78%"></div>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-6 w-full">Run Matching Algorithm</button>
                    </div>

                    <div class="card p-6">
                        <h3 class="text-xl mb-4">Recent Matches</h3>
                        <div class="space-y-4">
                            <div class="flex justify-between items-center p-3 bg-[--bg-tertiary] rounded">
                                <div>
                                    <div class="text-sm font-semibold">PT-2891 → NCT-04523</div>
                                    <div class="text-xs text-[--text-secondary] mt-1">Matched 3 mins ago</div>
                                </div>
                                <span class="status-badge status-active">95% Match</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-[--bg-tertiary] rounded">
                                <div>
                                    <div class="text-sm font-semibold">PT-3104 → NCT-05891</div>
                                    <div class="text-xs text-[--text-secondary] mt-1">Matched 12 mins ago</div>
                                </div>
                                <span class="status-badge status-active">89% Match</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-[--bg-tertiary] rounded">
                                <div>
                                    <div class="text-sm font-semibold">PT-1847 → NCT-03312</div>
                                    <div class="text-xs text-[--text-secondary] mt-1">Matched 28 mins ago</div>
                                </div>
                                <span class="status-badge status-active">92% Match</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Add Patient Modal -->
    <div id="patient-modal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl">Add New Patient</h2>
                <button class="btn" onclick="closeModal('patient')">✕</button>
            </div>
            <form id="patient-form" onsubmit="addPatient(event)">
                <div class="grid grid-cols-2 gap-4">
                    <div class="form-group">
                        <label class="form-label">First Name</label>
                        <input type="text" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Last Name</label>
                        <input type="text" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Age</label>
                        <input type="number" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Gender</label>
                        <select class="form-select" required>
                            <option value="">Select</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group col-span-2">
                        <label class="form-label">Primary Condition</label>
                        <input type="text" class="form-input" required>
                    </div>
                    <div class="form-group col-span-2">
                        <label class="form-label">Status</label>
                        <select class="form-select" required>
                            <option value="active">Active</option>
                            <option value="pending">Pending</option>
                            <option value="declined">Declined</option>
                        </select>
                    </div>
                </div>
                <div class="flex gap-3 mt-6">
                    <button type="submit" class="btn btn-primary flex-1">Add Patient</button>
                    <button type="button" class="btn flex-1" onclick="closeModal('patient')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Trial Modal -->
    <div id="trial-modal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl">Add New Clinical Trial</h2>
                <button class="btn" onclick="closeModal('trial')">✕</button>
            </div>
            <form id="trial-form" onsubmit="addTrial(event)">
                <div class="grid grid-cols-2 gap-4">
                    <div class="form-group col-span-2">
                        <label class="form-label">Study Name</label>
                        <input type="text" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phase</label>
                        <select class="form-select" required>
                            <option value="">Select</option>
                            <option value="I">Phase I</option>
                            <option value="II">Phase II</option>
                            <option value="III">Phase III</option>
                            <option value="IV">Phase IV</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Status</label>
                        <select class="form-select" required>
                            <option value="recruiting">Recruiting</option>
                            <option value="active">Active</option>
                            <option value="completed">Completed</option>
                        </select>
                    </div>
                    <div class="form-group col-span-2">
                        <label class="form-label">Sponsor</label>
                        <input type="text" class="form-input" required>
                    </div>
                    <div class="form-group col-span-2">
                        <label class="form-label">Condition/Disease</label>
                        <input type="text" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Target Enrollment</label>
                        <input type="number" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Start Date</label>
                        <input type="date" class="form-input" required>
                    </div>
                </div>
                <div class="flex gap-3 mt-6">
                    <button type="submit" class="btn btn-primary flex-1">Add Trial</button>
                    <button type="button" class="btn flex-1" onclick="closeModal('trial')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Sample Data
        const patientsData = [
            { id: 'PT-2891', name: 'Sarah Mitchell', age: 42, gender: 'Female', condition: 'Type 2 Diabetes', status: 'active', enrolled: '2024-01-15', matches: 3 },
            { id: 'PT-3104', name: 'James Anderson', age: 58, gender: 'Male', condition: 'Rheumatoid Arthritis', status: 'active', enrolled: '2024-01-22', matches: 5 },
            { id: 'PT-1847', name: 'Maria Rodriguez', age: 35, gender: 'Female', condition: 'Multiple Sclerosis', status: 'pending', enrolled: '2024-02-03', matches: 2 },
            { id: 'PT-4523', name: 'Robert Chen', age: 67, gender: 'Male', condition: "Alzheimer's Disease", status: 'active', enrolled: '2024-02-10', matches: 4 },
            { id: 'PT-2156', name: 'Jennifer Taylor', age: 29, gender: 'Female', condition: 'Crohn\'s Disease', status: 'active', enrolled: '2024-02-14', matches: 1 },
            { id: 'PT-3892', name: 'Michael Brown', age: 51, gender: 'Male', condition: 'Cardiovascular Disease', status: 'declined', enrolled: '2024-01-28', matches: 0 },
            { id: 'PT-1674', name: 'Emily Johnson', age: 44, gender: 'Female', condition: 'Breast Cancer', status: 'active', enrolled: '2024-02-18', matches: 6 },
            { id: 'PT-5021', name: 'David Martinez', age: 62, gender: 'Male', condition: 'Parkinson\'s Disease', status: 'pending', enrolled: '2024-02-21', matches: 2 }
        ];

        const trialsData = [
            { id: 'NCT-04523', name: 'GLUCOGUARD: Novel Insulin Therapy Study', phase: 'III', sponsor: 'MediPharm Research', condition: 'Type 2 Diabetes', status: 'recruiting', enrollment: '142/200', start: '2023-11-01' },
            { id: 'NCT-05891', name: 'ARTHRICARE: JAK Inhibitor Efficacy Trial', phase: 'II', sponsor: 'BioGenix Labs', condition: 'Rheumatoid Arthritis', status: 'recruiting', enrollment: '68/120', start: '2024-01-15' },
            { id: 'NCT-03312', name: 'NEUROVITA: MS Progression Prevention', phase: 'III', sponsor: 'NeuroTech Industries', condition: 'Multiple Sclerosis', status: 'recruiting', enrollment: '201/300', start: '2023-09-10' },
            { id: 'NCT-06734', name: 'COGNISAFE: Alzheimer\'s Biomarker Study', phase: 'II', sponsor: 'MindCure Therapeutics', condition: "Alzheimer's Disease", status: 'recruiting', enrollment: '89/150', start: '2024-02-01' },
            { id: 'NCT-02198', name: 'GASTROEASE: IBD Remission Trial', phase: 'III', sponsor: 'DigestiCare Corp', condition: 'Crohn\'s Disease', status: 'active', enrollment: '178/180', start: '2023-08-20' },
            { id: 'NCT-07456', name: 'CARDIOPROTECT: Heart Failure Prevention', phase: 'III', sponsor: 'CardioVascular Inc', condition: 'Cardiovascular Disease', status: 'recruiting', enrollment: '234/400', start: '2023-10-05' },
            { id: 'NCT-01823', name: 'ONCOCHECK: Breast Cancer Immunotherapy', phase: 'II', sponsor: 'OncoGen Research', condition: 'Breast Cancer', status: 'recruiting', enrollment: '45/100', start: '2024-01-20' },
            { id: 'NCT-08912', name: 'MOVEWELL: Parkinson\'s Mobility Study', phase: 'II', sponsor: 'Movement Disorders Lab', condition: 'Parkinson\'s Disease', status: 'recruiting', enrollment: '56/80', start: '2024-02-10' }
        ];

        // Populate Tables
        function populatePatientsTable(data = patientsData) {
            const tbody = document.getElementById('patients-tbody');
            tbody.innerHTML = data.map(patient => `
                <tr>
                    <td><strong>${patient.id}</strong></td>
                    <td>${patient.name}</td>
                    <td>${patient.age}</td>
                    <td>${patient.gender}</td>
                    <td>${patient.condition}</td>
                    <td><span class="status-badge status-${patient.status}">${patient.status}</span></td>
                    <td>${patient.enrolled}</td>
                    <td><span class="text-[--accent-primary] font-semibold">${patient.matches}</span></td>
                    <td>
                        <button class="btn text-xs" onclick="viewDetails('patient', '${patient.id}')">View</button>
                    </td>
                </tr>
            `).join('');
        }

        function populateTrialsTable(data = trialsData) {
            const tbody = document.getElementById('trials-tbody');
            tbody.innerHTML = data.map(trial => `
                <tr>
                    <td><strong>${trial.id}</strong></td>
                    <td>${trial.name}</td>
                    <td>Phase ${trial.phase}</td>
                    <td>${trial.sponsor}</td>
                    <td>${trial.condition}</td>
                    <td><span class="status-badge status-${trial.status}">${trial.status}</span></td>
                    <td>${trial.enrollment}</td>
                    <td>${trial.start}</td>
                    <td>
                        <button class="btn text-xs" onclick="viewDetails('trial', '${trial.id}')">View</button>
                    </td>
                </tr>
            `).join('');
        }

        // Tab Switching
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(`${tabName}-tab`).style.display = 'block';
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }

        // Modal Functions
        function openModal(type) {
            document.getElementById(`${type}-modal`).classList.add('active');
        }

        function closeModal(type) {
            document.getElementById(`${type}-modal`).classList.remove('active');
        }

        // Form Submissions
        function addPatient(event) {
            event.preventDefault();
            alert('Patient added successfully! (This is a demo)');
            closeModal('patient');
            event.target.reset();
        }

        function addTrial(event) {
            event.preventDefault();
            alert('Clinical trial added successfully! (This is a demo)');
            closeModal('trial');
            event.target.reset();
        }

        function viewDetails(type, id) {
            alert(`Viewing details for ${type} ${id} (This is a demo)`);
        }

        // Search Functionality
        document.addEventListener('DOMContentLoaded', function() {
            populatePatientsTable();
            populateTrialsTable();

            // Patient Search
            const patientSearch = document.getElementById('patient-search');
            patientSearch.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                const filtered = patientsData.filter(patient => 
                    patient.name.toLowerCase().includes(searchTerm) ||
                    patient.id.toLowerCase().includes(searchTerm) ||
                    patient.condition.toLowerCase().includes(searchTerm)
                );
                populatePatientsTable(filtered);
            });

            // Trial Search
            const trialSearch = document.getElementById('trial-search');
            trialSearch.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                const filtered = trialsData.filter(trial => 
                    trial.name.toLowerCase().includes(searchTerm) ||
                    trial.id.toLowerCase().includes(searchTerm) ||
                    trial.sponsor.toLowerCase().includes(searchTerm) ||
                    trial.condition.toLowerCase().includes(searchTerm)
                );
                populateTrialsTable(filtered);
            });
        });

        // Close modal on outside click
        window.addEventListener('click', function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        });
    </script>
</body>
</html>